
> [!NOTE]
> Documentation auto-generated by [ai-docs.](https://github.com/connor-john/ai-docs)

Module Overview:
The provided Python module contains utility functions and a custom queue class that don't fit into any specific category. The module aims to provide small, reusable functions and classes that can be used across various parts of a larger project. It includes functions for comparing Discord embeds and activities, as well as a custom queue class with a peek functionality.

Installation and Setup:
To use this module, ensure that you have the following dependencies installed:
- Python 3.x
- discord.py library

You can install the discord.py library using pip:
```
pip install discord.py
```

Once the dependencies are installed, you can import the module in your Python code:
```python
import utils
```

Usage Guide:
1. `embed_eq(embed1, embed2)`:
   - Description: Compares two Discord embeds for equality.
   - Parameters:
     - `embed1` (typing.Optional[discord.Embed]): The first embed to compare.
     - `embed2` (typing.Optional[discord.Embed]): The second embed to compare.
   - Returns: True if the embeds are equal, False otherwise.

2. `activity_eq(act1, act2)`:
   - Description: Compares two Discord activities for equality.
   - Parameters:
     - `act1` (typing.Optional[discord.Activity]): The first activity to compare.
     - `act2` (typing.Optional[discord.Activity]): The second activity to compare.
   - Returns: True if the activities are equal, False otherwise.

3. `embed_proxy_eq(embed_proxy1, embed_proxy2)`:
   - Description: Compares two embed proxy objects for equality based on their string representation.
   - Parameters:
     - `embed_proxy1`: The first embed proxy object to compare.
     - `embed_proxy2`: The second embed proxy object to compare.
   - Returns: True if the embed proxy objects have the same string representation, False otherwise.

4. `PeekableQueue` class:
   - Description: An extension of the `asyncio.Queue` class with a `peek` method to retrieve the last value in the queue without removing it.
   - Methods:
     - `peek()`: Returns the last value in the queue, assuming there are any. Raises an exception if the queue is empty.

Testing Guide:
Here are some example test cases for the utility functions and the `PeekableQueue` class:

```python
# Example test file: test_utils.py
import asyncio
from typing import Optional
import pytest
from unittest.mock import MagicMock
from discord import Embed, Activity, ActivityType

from utils import embed_eq, activity_eq, embed_proxy_eq, PeekableQueue

# Test case for embed_eq function
@pytest.mark.parametrize("embed1, embed2, expected", [
    (None, None, True),
    (None, Embed(title="Test"), False),
    (Embed(title="Test"), None, False),
    (Embed(title="Test"), Embed(title="Test"), True),
    (Embed(title="Test"), Embed(title="Different"), False),
])
def test_embed_eq(embed1: Optional[Embed], embed2: Optional[Embed], expected: bool):
    assert embed_eq(embed1, embed2) == expected

# Test case for activity_eq function
@pytest.mark.parametrize("act1, act2, expected", [
    (None, None, True),
    (None, Activity(name="Test"), False),
    (Activity(name="Test"), None, False),
    (Activity(name="Test"), Activity(name="Test"), True),
    (Activity(name="Test"), Activity(name="Different"), False),
])
def test_activity_eq(act1: Optional[Activity], act2: Optional[Activity], expected: bool):
    assert activity_eq(act1, act2) == expected

# Test case for embed_proxy_eq function
def test_embed_proxy_eq():
    embed_proxy1 = MagicMock()
    embed_proxy1.__repr__ = MagicMock(return_value="Embed Proxy 1")
    embed_proxy2 = MagicMock()
    embed_proxy2.__repr__ = MagicMock(return_value="Embed Proxy 2")

    assert embed_proxy_eq(embed_proxy1, embed_proxy1) is True
    assert embed_proxy_eq(embed_proxy1, embed_proxy2) is False

# Test case for PeekableQueue class
@pytest.mark.asyncio
async def test_peekable_queue():
    queue = PeekableQueue()

    with pytest.raises(IndexError):
        queue.peek()

    await queue.put(1)
    await queue.put(2)
    await queue.put(3)

    assert queue.peek() == 3
    assert await queue.get() == 1
    assert queue.peek() == 3
    assert await queue.get() == 2
    assert queue.peek() == 3
    assert await queue.get() == 3

    with pytest.raises(IndexError):
        queue.peek()
```

Testing Best Practices:
- Use pytest as the testing framework.
- Utilize parametrized tests for different input scenarios.
- Use `unittest.mock` for mocking dependencies.
- Test both success and error cases.
- Use `pytest.mark.asyncio` for testing asynchronous code.

Error Handling and Edge Cases:
- Test with None values for optional parameters.
- Test with empty queues and ensure proper exceptions are raised.

Integration Testing:
- Test with real Discord embeds and activities to ensure compatibility.

Debugging and Troubleshooting:
- Use breakpoints and debugging tools to investigate failures.
- Log relevant information for easier debugging.

Remember to:
- Write clear and concise test case descriptions.
- Use meaningful variable names in test cases.
- Ensure test coverage for all functions and classes.
- Update the documentation as the module evolves.
